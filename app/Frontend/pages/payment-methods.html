<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Payment Methods - Smart Parking System</title>
  <link href="../css/styles.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="min-h-screen flex flex-col bg-parkBlue-900">
  <!-- Noise Background -->
  <div class="fixed inset-0 noise-bg pointer-events-none"></div>

  <!-- Header/Navigation -->
  <header class="sticky top-0 z-30 w-full backdrop-blur-sm border-b border-white/10 bg-parkBlue-900/80">
    <div class="container flex items-center justify-between h-16">
      <div class="flex items-center gap-2">
        <a href="../index.html">
          <i class="fas fa-parking text-primary text-2xl"></i>
          <span class="font-bold text-xl">Miki<span class="text-primary">Park</span></span>
        </a>
      </div>

      <!-- Desktop Navigation -->
      <div class="hidden md:flex items-center space-x-4">
        <span class="text-muted-foreground">Welcome, <span class="text-foreground">John Doe</span></span>
        <div class="relative group">
          <button class="h-8 w-8 rounded-full bg-parkBlue-700 flex items-center justify-center hover:bg-primary/80 transition-colors">
            <i class="fas fa-user"></i>
          </button>
          <div class="absolute right-0 mt-2 w-48 py-2 bg-card rounded-md shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50">
            <a href="#" class="block px-4 py-2 hover:bg-accent text-sm">
              <i class="fas fa-user-circle mr-2"></i> Profile
            </a>
            <a href="#" class="block px-4 py-2 hover:bg-accent text-sm">
              <i class="fas fa-cog mr-2"></i> Settings
            </a>
            <div class="border-t border-white/10 my-1"></div>
            <a href="../index.html" class="block px-4 py-2 hover:bg-accent text-sm text-parkRed">
              <i class="fas fa-sign-out-alt mr-2"></i> Logout
            </a>
          </div>
        </div>
      </div>

      <!-- Mobile Menu Button -->
      <button class="md:hidden p-2 rounded-md hover:bg-accent" id="mobile-menu-button">
        <i class="fas fa-bars"></i>
      </button>
    </div>

    <!-- Mobile Navigation Menu -->
    <div class="md:hidden hidden" id="mobile-menu">
      <div class="container py-2 space-y-1 border-t border-white/10">
        <div class="flex items-center justify-between py-2">
          <span class="text-muted-foreground">Welcome, <span class="text-foreground">John Doe</span></span>
        </div>
        <a href="#" class="nav-link block">
          <i class="fas fa-user-circle mr-2"></i> Profile
        </a>
        <a href="#" class="nav-link block">
          <i class="fas fa-cog mr-2"></i> Settings
        </a>
        <a href="../index.html" class="nav-link block text-parkRed">
          <i class="fas fa-sign-out-alt mr-2"></i> Logout
        </a>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <div class="flex-1 container py-8">
    <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
      <!-- Sidebar -->
      <div class="lg:col-span-1">
        <div class="sticky top-24">
          <div class="glass-card p-4 mb-4">
            <!-- User Info -->
            <div class="flex items-center space-x-4 mb-6">
              <div class="h-14 w-14 rounded-full bg-parkBlue-700 flex items-center justify-center text-xl">
                <i class="fas fa-user"></i>
              </div>
              <div>
                <h2 class="font-bold">John Doe</h2>
                <p class="text-sm text-muted-foreground">john.doe@example.com</p>
              </div>
            </div>

            <!-- Navigation -->
            <nav class="space-y-1">
              <a href="user-dashboard.html" class="nav-link flex items-center w-full">
                <i class="fas fa-th-large w-5"></i>
                <span class="ml-3">Dashboard</span>
              </a>
              <a href="my-reservations.html" class="nav-link flex items-center w-full">
                <i class="fas fa-ticket-alt w-5"></i>
                <span class="ml-3">My Reservations</span>
              </a>
              <a href="booking-history.html" class="nav-link flex items-center w-full">
                <i class="fas fa-history w-5"></i>
                <span class="ml-3">Booking History</span>
              </a>
              <a href="payment-methods.html" class="nav-link active flex items-center w-full">
                <i class="fas fa-credit-card w-5"></i>
                <span class="ml-3">Payment Methods</span>
              </a>
              <a href="account-settings.html" class="nav-link flex items-center w-full">
                <i class="fas fa-cog w-5"></i>
                <span class="ml-3">Account Settings</span>
              </a>
            </nav>
          </div>

          <!-- Balance Card -->
          <div class="glass-card p-4">
            <h3 class="font-bold mb-4">Account Balance</h3>
            <div class="bg-parkBlue-800/50 rounded-lg p-6 text-center">
              <div class="text-3xl font-bold text-primary mb-2">350 Birr</div>
              <p class="text-sm text-muted-foreground mb-4">Available Balance</p>
              <button id="top-up-button" class="btn btn-primary w-full">
                <i class="fas fa-plus-circle mr-2"></i> Top Up Balance
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Main Content Area -->
      <div class="lg:col-span-3 space-y-8">
        <!-- Page Title -->
        <div class="flex justify-between items-center">
          <h1 class="text-2xl font-bold">Payment Methods</h1>
          <button class="btn btn-outline">
            <i class="fas fa-plus mr-2"></i> Add New Method
          </button>
        </div>



        <!-- Transaction History -->
        <div class="glass-card p-6">
          <div class="flex justify-between items-center mb-6">
            <h2 class="text-xl font-bold">Recent Transactions</h2>
            <a href="#" class="text-primary text-sm hover:underline">View All</a>
          </div>

          <div class="space-y-4">
            <div class="bg-parkBlue-800/50 rounded-lg p-4">
              <div class="flex justify-between items-center">
                <div class="flex items-center">
                  <div class="h-10 w-10 rounded-full bg-parkGreen/20 flex items-center justify-center mr-3">
                    <i class="fas fa-arrow-down text-parkGreen"></i>
                  </div>
                  <div>
                    <h4 class="font-medium">Top Up</h4>
                    <p class="text-xs text-muted-foreground">May 15, 2024 • Telebirr</p>
                  </div>
                </div>
                <div class="text-right">
                  <div class="text-parkGreen font-bold">+200 Birr</div>
                  <p class="text-xs text-muted-foreground">Completed</p>
                </div>
              </div>
            </div>

            <div class="bg-parkBlue-800/50 rounded-lg p-4">
              <div class="flex justify-between items-center">
                <div class="flex items-center">
                  <div class="h-10 w-10 rounded-full bg-parkRed/20 flex items-center justify-center mr-3">
                    <i class="fas fa-arrow-up text-parkRed"></i>
                  </div>
                  <div>
                    <h4 class="font-medium">Parking Payment</h4>
                    <p class="text-xs text-muted-foreground">May 12, 2024 • Slot A-12</p>
                  </div>
                </div>
                <div class="text-right">
                  <div class="text-parkRed font-bold">-60 Birr</div>
                  <p class="text-xs text-muted-foreground">Completed</p>
                </div>
              </div>
            </div>

            <div class="bg-parkBlue-800/50 rounded-lg p-4">
              <div class="flex justify-between items-center">
                <div class="flex items-center">
                  <div class="h-10 w-10 rounded-full bg-parkGreen/20 flex items-center justify-center mr-3">
                    <i class="fas fa-arrow-down text-parkGreen"></i>
                  </div>
                  <div>
                    <h4 class="font-medium">Top Up</h4>
                    <p class="text-xs text-muted-foreground">May 10, 2024 • Visa •••• 4242</p>
                  </div>
                </div>
                <div class="text-right">
                  <div class="text-parkGreen font-bold">+300 Birr</div>
                  <p class="text-xs text-muted-foreground">Completed</p>
                </div>
              </div>
            </div>

            <div class="bg-parkBlue-800/50 rounded-lg p-4">
              <div class="flex justify-between items-center">
                <div class="flex items-center">
                  <div class="h-10 w-10 rounded-full bg-parkRed/20 flex items-center justify-center mr-3">
                    <i class="fas fa-arrow-up text-parkRed"></i>
                  </div>
                  <div>
                    <h4 class="font-medium">Parking Payment</h4>
                    <p class="text-xs text-muted-foreground">May 8, 2024 • Slot B-05</p>
                  </div>
                </div>
                <div class="text-right">
                  <div class="text-parkRed font-bold">-90 Birr</div>
                  <p class="text-xs text-muted-foreground">Completed</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Top Up Modal -->
  <div id="top-up-modal" class="modal-overlay hidden">
    <div class="modal-container">
      <button type="button" class="absolute top-4 right-4 text-muted-foreground hover:text-foreground" id="close-top-up-modal">
        <i class="fas fa-times"></i>
      </button>

      <h2 class="text-xl font-bold mb-2">Top Up Your Balance</h2>

      <div class="flex items-center justify-center mb-4">
        <i class="fas fa-parking text-primary text-2xl mr-2"></i>
        <span class="font-bold text-xl">Miki<span class="text-primary">Park</span></span>
      </div>

      <form id="top-up-form">
        <div class="space-y-4">
          <div>
            <label for="amount" class="block text-sm font-medium mb-1">Amount (Birr)</label>
            <input type="number" id="amount" class="input w-full" min="50" step="10" value="100" required>
          </div>

          <!-- Company Bank Account Details -->
          <div class="bg-parkBlue-800/50 rounded-lg p-4">
            <h3 class="font-bold mb-2">Company Bank Account</h3>

            <div class="flex items-center justify-between mb-2">
              <div>
                <p class="text-sm text-muted-foreground">Bank Name</p>
                <p class="font-medium">Commercial Bank of Ethiopia (CBE)</p>
              </div>
            </div>

            <div class="flex items-center justify-between mb-2">
              <div>
                <p class="text-sm text-muted-foreground">Account Name</p>
                <p class="font-medium">Miki Parking Solutions PLC</p>
              </div>
            </div>

            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm text-muted-foreground">Account Number</p>
                <p class="font-medium">1000123456789</p>
              </div>
              <button type="button" id="copy-account" class="btn-icon text-muted-foreground hover:text-foreground" title="Copy Account Number">
                <i class="fas fa-copy"></i>
              </button>
            </div>
          </div>

          <!-- Payment Instructions -->
          <div class="bg-parkBlue-800/50 rounded-lg p-4">
            <h3 class="font-bold mb-2">Payment Instructions</h3>

            <ol class="list-decimal list-inside space-y-2 text-sm">
              <li>Transfer the amount to the CBE account shown above</li>
              <li>Take a screenshot of your payment confirmation</li>
              <li>Click "Next Step" to upload your payment screenshot</li>
              <li>Your account will be credited after verification</li>
            </ol>
          </div>

          <div class="bg-parkBlue-800/50 rounded-lg p-4">
            <div class="flex justify-between items-center mb-2">
              <span class="text-sm">Amount</span>
              <span id="summary-amount">100 Birr</span>
            </div>
            <div class="flex justify-between items-center mb-2">
              <span class="text-sm">Service Fee</span>
              <span>0 Birr</span>
            </div>
            <div class="border-t border-white/10 my-2"></div>
            <div class="flex justify-between items-center font-bold">
              <span>Total</span>
              <span id="summary-total">100 Birr</span>
            </div>
          </div>

          <button type="submit" class="btn btn-primary w-full">
            Next Step
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Upload Receipt Modal -->
  <div id="upload-modal" class="modal-overlay hidden">
    <div class="modal-container">
      <button type="button" class="absolute top-4 right-4 text-muted-foreground hover:text-foreground" id="close-upload-modal">
        <i class="fas fa-times"></i>
      </button>

      <h2 class="text-xl font-bold mb-6">Upload Payment Receipt</h2>

      <form id="upload-form">
        <div class="space-y-6">
          <div class="bg-parkBlue-800/50 rounded-lg p-4 text-center">
            <div class="mb-4">
              <i class="fas fa-receipt text-primary text-4xl"></i>
            </div>
            <p class="text-sm text-muted-foreground mb-4">
              Please upload a screenshot of your payment receipt for <span id="receipt-amount">100 Birr</span>
            </p>

            <div class="border-2 border-dashed border-white/20 rounded-lg p-6 cursor-pointer hover:border-primary/50 transition-colors" id="drop-area">
              <input type="file" id="receipt-file" class="hidden" accept="image/*">
              <div class="text-center" id="upload-placeholder">
                <i class="fas fa-cloud-upload-alt text-muted-foreground text-3xl mb-2"></i>
                <p class="font-medium">Drag & drop your receipt here</p>
                <p class="text-sm text-muted-foreground">or</p>
                <button type="button" id="browse-button" class="btn btn-outline mt-2">
                  Browse Files
                </button>
              </div>
              <div class="hidden" id="upload-preview">
                <img id="receipt-preview" src="#" alt="Receipt preview" class="max-h-48 mx-auto mb-2">
                <p class="text-sm text-center" id="file-name"></p>
              </div>
            </div>
          </div>

          <div class="bg-parkBlue-800/50 rounded-lg p-4">
            <h3 class="font-bold mb-2">Verification Process</h3>
            <ul class="list-disc list-inside space-y-2 text-sm">
              <li>Your receipt will be verified by our team</li>
              <li>Verification usually takes 1-2 hours during business hours</li>
              <li>You will receive a notification once your account is credited</li>
            </ul>
          </div>

          <button type="submit" class="btn btn-primary w-full">
            Submit Receipt
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Success Modal -->
  <div id="success-modal" class="modal-overlay hidden">
    <div class="modal-container text-center">
      <div class="w-20 h-20 bg-parkGreen/20 rounded-full flex items-center justify-center mx-auto mb-6">
        <i class="fas fa-check text-parkGreen text-3xl"></i>
      </div>

      <h2 class="text-xl font-bold mb-2">Receipt Submitted Successfully!</h2>
      <p class="text-muted-foreground mb-6">
        Your payment receipt for <span id="success-amount">100 Birr</span> has been submitted for verification. Your account will be credited after verification.
      </p>

      <button id="close-success-modal" class="btn btn-primary w-full">
        Done
      </button>
    </div>
  </div>

  <!-- Footer -->
  <footer class="border-t border-white/10 py-6 mt-auto">
    <div class="container">
      <div class="flex flex-col md:flex-row justify-between items-center">
        <div class="flex items-center gap-2 mb-4 md:mb-0">
          <i class="fas fa-parking text-primary text-xl"></i>
          <span class="font-bold">Smart<span class="text-primary">Park</span></span>
        </div>

        <p class="text-muted-foreground text-sm">
          © 2024 SmartPark. All rights reserved.
        </p>
      </div>
    </div>
  </footer>

  <script>
    // Mobile menu toggle
    document.getElementById('mobile-menu-button').addEventListener('click', function() {
      const mobileMenu = document.getElementById('mobile-menu');
      mobileMenu.classList.toggle('hidden');
    });

    // Modal elements
    const topUpModal = document.getElementById('top-up-modal');
    const topUpButton = document.getElementById('top-up-button');
    const closeTopUpModal = document.getElementById('close-top-up-modal');
    const uploadModal = document.getElementById('upload-modal');
    const closeUploadModal = document.getElementById('close-upload-modal');
    const successModal = document.getElementById('success-modal');
    const closeSuccessModal = document.getElementById('close-success-modal');

    // Amount elements
    const amountInput = document.getElementById('amount');
    const summaryAmount = document.getElementById('summary-amount');
    const summaryTotal = document.getElementById('summary-total');
    const receiptAmount = document.getElementById('receipt-amount');
    const successAmount = document.getElementById('success-amount');

    // File upload elements
    const dropArea = document.getElementById('drop-area');
    const fileInput = document.getElementById('receipt-file');
    const browseButton = document.getElementById('browse-button');
    const uploadPlaceholder = document.getElementById('upload-placeholder');
    const uploadPreview = document.getElementById('upload-preview');
    const receiptPreview = document.getElementById('receipt-preview');
    const fileName = document.getElementById('file-name');

    // Copy account number button
    const copyAccountButton = document.getElementById('copy-account');

    // Show top-up modal
    topUpButton.addEventListener('click', function() {
      topUpModal.classList.remove('hidden');
    });

    // Close modals
    closeTopUpModal.addEventListener('click', function() {
      topUpModal.classList.add('hidden');
    });

    closeUploadModal.addEventListener('click', function() {
      uploadModal.classList.add('hidden');
    });

    closeSuccessModal.addEventListener('click', function() {
      successModal.classList.add('hidden');
    });

    // Update amount in all places when input changes
    amountInput.addEventListener('input', function() {
      const amount = this.value;
      summaryAmount.textContent = `${amount} Birr`;
      summaryTotal.textContent = `${amount} Birr`;
      receiptAmount.textContent = `${amount} Birr`;
      successAmount.textContent = `${amount} Birr`;
    });

    // Copy account number functionality
    copyAccountButton.addEventListener('click', function() {
      const accountNumber = '1000123456789';
      navigator.clipboard.writeText(accountNumber).then(function() {
        // Change icon temporarily to show success
        const icon = copyAccountButton.querySelector('i');
        icon.classList.remove('fa-copy');
        icon.classList.add('fa-check');

        setTimeout(function() {
          icon.classList.remove('fa-check');
          icon.classList.add('fa-copy');
        }, 1500);
      });
    });

    // File upload functionality
    browseButton.addEventListener('click', function() {
      fileInput.click();
    });

    // Handle file selection
    fileInput.addEventListener('change', handleFileSelect);

    // Drag and drop functionality
    ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
      dropArea.addEventListener(eventName, preventDefaults, false);
    });

    function preventDefaults(e) {
      e.preventDefault();
      e.stopPropagation();
    }

    ['dragenter', 'dragover'].forEach(eventName => {
      dropArea.addEventListener(eventName, highlight, false);
    });

    ['dragleave', 'drop'].forEach(eventName => {
      dropArea.addEventListener(eventName, unhighlight, false);
    });

    function highlight() {
      dropArea.classList.add('border-primary');
    }

    function unhighlight() {
      dropArea.classList.remove('border-primary');
    }

    dropArea.addEventListener('drop', handleDrop, false);

    function handleDrop(e) {
      const dt = e.dataTransfer;
      const files = dt.files;

      if (files.length) {
        fileInput.files = files;
        handleFileSelect();
      }
    }

    function handleFileSelect() {
      if (fileInput.files.length) {
        const file = fileInput.files[0];

        // Show preview
        uploadPlaceholder.classList.add('hidden');
        uploadPreview.classList.remove('hidden');

        // Set file name
        fileName.textContent = file.name;

        // Create preview image
        const reader = new FileReader();
        reader.onload = function(e) {
          receiptPreview.src = e.target.result;
        };
        reader.readAsDataURL(file);
      }
    }

    // Top-up form submission (goes to upload modal)
    document.getElementById('top-up-form').addEventListener('submit', function(e) {
      e.preventDefault();

      const amount = amountInput.value;
      receiptAmount.textContent = `${amount} Birr`;

      topUpModal.classList.add('hidden');
      uploadModal.classList.remove('hidden');
    });

    // Upload form submission (goes to success modal)
    document.getElementById('upload-form').addEventListener('submit', function(e) {
      e.preventDefault();

      if (!fileInput.files.length) {
        alert('Please upload a receipt image first');
        return;
      }

      const amount = amountInput.value;
      successAmount.textContent = `${amount} Birr`;

      uploadModal.classList.add('hidden');
      successModal.classList.remove('hidden');
    });

    // Navigation links handler
    document.addEventListener('DOMContentLoaded', function() {
      // Get all navigation links
      const navLinks = document.querySelectorAll('.nav-link');

      // Add click event listeners to each link
      navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
          const href = this.getAttribute('href');
          if (href && href !== '#') {
            window.location.href = href;
          }
        });
      });
    });
  </script>
</body>
</html>
